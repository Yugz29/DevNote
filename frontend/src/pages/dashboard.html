<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevNote</title>

    <!-- Preload fonts to avoid CLS -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdn.jsdelivr.net/gh">

    <!-- CSS -->
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/dashboard.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css" integrity="sha384-6iv3tXABd3c9DYulXujJl8n22ahn/12f45MomxoPv6jBX4LBE4gNJjfkx5mAKIqR" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/light/style.css" integrity="sha384-GzhNOdwUkh38xzoNEY1vRdLr+w8q+bXEJsd/km6Ef61w1Kfk+lself6cn14ilrpO" crossorigin="anonymous">
</head>
<body>
    <!-- LAYOUT: Sidebar + Main -->
     <div class="layout">
        <div id="sidebar-overlay" class="sidebar-overlay"></div>


        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-header-left">
                    <button id="sidebar-toggle" class="btn-icon-sm" title="Close sidebar">
                        <i class="ph-light ph-list"></i>
                    </button>
                    <h2>Projects</h2>
                </div>
                <div class="sidebar-header-right">
                    <button id="search-btn" class="btn-icon-sm" title="Search (⌘K)">
                        <i class="ph-light ph-magnifying-glass"></i>
                    </button>
                    <div class="project-sort-wrap">
                        <button id="project-sort-btn" class="btn-icon-sm" title="Sort projects">
                            <i class="ph-light ph-sort-ascending"></i>
                        </button>
                        <div id="project-sort-dropdown" class="project-sort-dropdown">
                            <button class="sort-option active" data-sort="created_desc">Newest first</button>
                            <button class="sort-option" data-sort="created_asc">Oldest first</button>
                            <button class="sort-option" data-sort="updated_desc">Recently updated</button>
                            <button class="sort-option" data-sort="name_asc">Name A → Z</button>
                            <button class="sort-option" data-sort="name_desc">Name Z → A</button>
                        </div>
                    </div>
                    <button id="newProjectBtn" class="btn-icon-sm" title="New project">
                        <i class="ph-light ph-plus"></i>
                    </button>
                </div>
            </div>

            <div id="projects-list">
                <p class="loading">Loading projects...</p>
            </div>

            <div class="sidebar-footer">
                <span id="sidebar-user-name" class="sidebar-user">...</span>
                <button id="logout-btn" class="btn-logout" title="Logout">
                    <i class="ph-light ph-sign-out"></i>
                </button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- Burger button — always in main, always accessible -->
            <button id="sidebar-open" class="btn-sidebar-open" title="Open sidebar">
                <i class="ph-light ph-list"></i>
            </button>

            <div id="welcome-screen" class="welcome-screen">
                <h1>Welcome, <span id="user-name">...</span></h1>
            </div>

            <!-- AREA displayed project selected -->
            <div id="project-view" style="display: none;">
                <header class="project-header">
                    <div class="project-header-left">
                        <div>
                            <h1 id="project-title">Project Name</h1>
                            <p id="project-description" class="project-description"></p>
                        </div>
                    </div>
                    <div class="project-menu-wrap">
                        <button id="project-menu-btn" class="btn-project-menu" title="Project settings">
                            <i class="ph-light ph-dots-three"></i>
                        </button>
                        <div id="project-menu-dropdown" class="project-menu-dropdown">
                            <button class="project-menu-item project-menu-item--danger" data-action="delete">
                                <i class="ph-light ph-trash"></i>
                                Delete project
                            </button>
                        </div>
                    </div>
                </header>

                <div class="tabs">
                    <div class="tabs-inner">
                        <button class="tab active" data-tab="notes">Notes</button>
                        <button class="tab" data-tab="snippets">Code Snippets</button>
                        <button class="tab" data-tab="todos">TODOs</button>
                    </div>
                    <div class="note-controls">
                    <div class="content-sort-wrap">
                        <button id="note-sort-btn" class="content-sort-btn">
                            <i class="ph-light ph-sort-ascending"></i>
                            <span id="note-sort-label">Created</span>
                            <i class="ph-light ph-caret-down sort-chevron"></i>
                        </button>
                        <div id="note-sort-dropdown" class="project-sort-dropdown">
                            <button class="sort-option" data-sort="created">Created</button>
                            <button class="sort-option" data-sort="updated">Updated</button>
                            <button class="sort-option" data-sort="title">Title A → Z</button>
                        </div>
                    </div>
                    </div>
                    <div class="snippet-controls">
                    <div class="content-sort-wrap">
                        <button id="snippet-sort-btn" class="content-sort-btn">
                            <i class="ph-light ph-sort-ascending"></i>
                            <span id="snippet-sort-label">Created</span>
                            <i class="ph-light ph-caret-down sort-chevron"></i>
                        </button>
                        <div id="snippet-sort-dropdown" class="project-sort-dropdown">
                            <button class="sort-option" data-sort="created">Created</button>
                            <button class="sort-option" data-sort="updated">Updated</button>
                            <button class="sort-option" data-sort="title">Title A → Z</button>
                        </div>
                    </div>
                    <div id="snippet-view-toggle" class="todo-view-toggle">
                        <button class="btn-view-toggle active" data-view="grid" title="Grid view">
                            <i class="ph-light ph-squares-four"></i>
                        </button>
                        <button class="btn-view-toggle" data-view="grouped" title="By language">
                            <i class="ph-light ph-rows"></i>
                        </button>
                    </div>
                    </div>
                    <div class="todo-controls">
                    <div class="content-sort-wrap">
                        <button id="todo-sort-btn" class="content-sort-btn">
                            <i class="ph-light ph-sort-ascending"></i>
                            <span id="todo-sort-label">Priority</span>
                            <i class="ph-light ph-caret-down sort-chevron"></i>
                        </button>
                        <div id="todo-sort-dropdown" class="project-sort-dropdown">
                            <button class="sort-option" data-sort="priority">Priority</button>
                            <button class="sort-option" data-sort="created">Created</button>
                            <button class="sort-option" data-sort="updated">Updated</button>
                        </div>
                    </div>
                    <div id="todo-view-toggle" class="todo-view-toggle">
                        <button class="btn-view-toggle active" data-view="list" title="List view">
                            <i class="ph-light ph-list-bullets"></i>
                        </button>
                        <button class="btn-view-toggle" data-view="kanban" title="Kanban view">
                            <i class="ph-light ph-columns"></i>
                        </button>
                    </div>
                    </div>
                </div>

                    <div class="tab-content">
                        <div id="tab-notes" class="tab-pane active">
                            <div id="notes-list" class="notes-list">
                                <!-- Dynamic notes inserted here -->
                            </div>
                        </div>
                        
                        <div id="tab-snippets" class="tab-pane">
                            <div id="snippets-list" class="snippets-list">
                                <!-- Dynamic snippets inseted here -->
                            </div>
                        </div>
                        
                        <div id="tab-todos" class="tab-pane">
                            <div id="todos-list" class="todos-list">
                                <!-- Dynamic todos inserted here -->
                            </div>
                        </div>
                    </div>
            </div>
        </main>
     </div>

    <!-- NEW PROJECT MODAL -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Project</h2>
                <button class="modal-close" title="Close"><i class="ph-light ph-x"></i></button>
            </div>

            <form id="project-form">
                <input type="hidden" name="id">
                <div class="form-group">
                    <label for="projectTitle">Title</label>
                    <input
                        type="text"
                        id="projectTitle"
                        name="title"
                        placeholder="My project..."
                        required
                        autocomplete="off"
                    >
                </div>

                <div class="form-group" id="project-description-group">
                    <label for="projectDescription">Description</label>
                    <textarea
                        id="projectDescription"
                        name="description"
                        rows="3"
                        placeholder="Optional description..."
                    ></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="dn-dialog-btn dn-dialog-btn--cancel" data-action="cancel">Cancel</button>
                    <button type="submit" id="project-form-submit" class="dn-dialog-btn dn-dialog-btn--primary">Create</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NOTE MODAL -->
     <div id="note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="note-modal-title">Create Note</h2>
                <button class="modal-close" id="note-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="note-form">
                    <input type="hidden" name="id">

                    <div class="form-group">
                        <label for="note-title">Title</label>
                        <input
                            type="text"
                            id="note-title"
                            name="title"
                            required
                            placeholder="My note"
                        >
                    </div>

                    <div class="form-group">
                        <label for="note-content">Content</label>
                        <textarea
                            id="note-content"
                            name="content"
                            rows="12"
                            required
                            placeholder="Write your note here..."
                        ></textarea>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" data-action="cancel">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- SNIPPET MODAL -->
    <div id="snippet-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Snippet</h2>
                <button class="modal-close" id="snippet-modal-close">&times;</button>
            </div>

            <form id="snippet-form">
                <input type="hidden" name="id">

                <div class="form-group">
                    <label for="snippet-title">Title</label>
                    <input
                        type="text"
                        id="snippet-title"
                        name="title"
                        placeholder="My Snippet"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="snippet-description">Description</label>
                    <input
                        type="text"
                        id="snippet-description"
                        name="description"
                        placeholder="Optional description..."
                    >
                </div>

                <div class="form-group">
                    <label for="snippet-language">Language</label>
                    <select id="snippet-language" name="language" required>
                        <option value="">Select a language</option>
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                        <option value="php">PHP</option>
                        <option value="ruby">Ruby</option>
                        <option value="go">Go</option>
                        <option value="rust">Rust</option>
                        <option value="sql">SQL</option>
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="bash">Bash</option>
                        <option value="text">Plain Text</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="snippet-content">Code</label>
                    <textarea
                        id="snippet-content"
                        name="content"
                        rows="10"
                        placeholder="Paste your code here..."
                        required
                    ></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" data-action="cancel">Cancel</button>
                    <button type="submit" class="btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- TODOS MODAL -->
    <div id="todo-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="todo-modal-title">New TODO</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="todo-form">
                    <input type="hidden" name="id">

                    <div class="form-group">
                        <label for="todo-title">Title</label>
                        <input
                            type="text"
                            id="todo-title"
                            name="title"
                            required
                            placeholder="My TODO"
                        >
                    </div>

                    <div class="form-group">
                        <label for="todo-description">Description</label>
                        <textarea
                            id="todo-description"
                            name="description"
                            rows="4"
                            placeholder="Optional description..."
                        ></textarea>
                    </div>

                    <div class="form-group">
                        <label for="todo-status">Status</label>
                        <select id="todo-status" name="status">
                            <option value="pending">Pending</option>
                            <option value="in_progress">In Progress</option>
                            <option value="done">Done</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="todo-priority">Priority</label>
                        <select id="todo-priority" name="priority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" data-action="cancel">Cancel</button>
                        <button type="submit" class="btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- SEARCH MODAL -->
    <div id="search-overlay" class="search-overlay">
        <div class="search-modal">
            <div class="search-input-wrapper">
                <span class="search-icon"><i class="ph-light ph-magnifying-glass"></i></span>
                <input
                    type="text"
                    id="search-input"
                    class="search-input"
                    placeholder="Global search..."
                    autocomplete="off"
                >
                <span class="search-shortcut">Esc</span>
            </div>
            <div id="search-results" class="search-results">
                <p class="search-hint">Type to search across all your projects</p>
            </div>
        </div>
    </div>

    <script type="module" src="./dashboard.js"></script>
</body>
</html>
